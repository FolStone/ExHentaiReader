<!DOCTYPE html>

<head>
    <style>
        body,
        html {
            height: 100%;
            width: 100%;
        }

        #container {
            width: 100%;
            position: absolute;
            display: flex;
            flex-flow: column nowrap;
            justify-content: start;
            align-items: center;
        }


        .confBox {
            display: flex;
            flex-flow: column nowrap;
            justify-content: start;
            align-items: center;
        }

        .line {
            margin-top: 20px;
            display: flex;
            flex-flow: row nowrap;
            justify-content: center;
            align-items: center;
        }

        input{
            height: 38px;
            width: 400px;
            font-size: 15px;
            outline: none;
            border-radius: 4px; 
            box-sizing: border-box;
        }
        .lineInput {
            
            padding: 1px 10px 1px 10px;
            border: 0px;
            border-bottom:1px solid gray;;
            margin: 20px 0px 10px 0px;
        }

        #genJs {
            margin-top: 30px;
            
        }
        #genJs:hover{
            border: 1px solid black;

        }

        #js {
            width: 400px;
            height: 140px;
        }

        #genBox {
            display: flex;
            flex-flow: column nowrap;
            justify-content: start;
            align-items: center;
        }
    </style>
    <script>
        function copy(str) {
            var input = document.createElement('input')
            input.value = str
            document.body.appendChild(input)
            input.select()
            document.execCommand("Copy");
            document.body.removeChild(input);
        }

        function genJS() {
            var jsAddress = '"https://manakanemu.github.io/ExHentaiReader/Reader.js?"'
            var attrString = ''
            var inputs = document.getElementsByClassName('lineInput')
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].value) {
                    attrString += 's.setAttribute("' + inputs[i].getAttribute('name') + '","' + inputs[i].value + '");'
                }
            }

            var jsString = 'javascript: (function () { var s = document.createElement("script"); s.setAttribute("id","exReader");s.setAttribute("src", ' + jsAddress + '+parseInt(Date.parse(new Date()) / 100));'
            jsString += attrString
            jsString += "document.body.appendChild(s);}())"
            document.getElementById('js').value = jsString
            copy(jsString)
            document.getElementById('info').innerHTML = '代码已复制到剪贴板,若复制失败请手动复制下面代码！'
            setTimeout(() => {
                document.getElementById('info').innerHTML = ''
            }, 3000);
        }
    </script>
</head>

<body>
    <div id="container">
        <h1>代码生成器</h1>
        <div class="confBox">
            <input class="lineInput" name="version" type="text" value="1.3" style="display: none;">
            <input class="lineInput" name="tag-fontsize" type="text" placeholder="自定义标签尺寸，请输入整数，不修改则此项留空">
            <input class="lineInput" name="toolbar-size" type="text" placeholder="自定义工具栏尺寸，请输入整数，不修改则此项留空">
            <input class="lineInput" name="line-color" type="text" placeholder="分割线颜色，格式为'#e5e5e5'，不修改则此项留空'">

        </div>
        <div id="genBox">
            <input id="genJs" type="button" value="生成代码" onclick="genJS()">
            <span id="info" style="color: red"></span>
            <textarea id="js" type="text" style='margin-top: 20px;'></textarea>
        </div>
        

    </div>
</body>
